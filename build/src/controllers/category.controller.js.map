{"version":3,"file":"category.controller.js","sourceRoot":"","sources":["../../../src/controllers/category.controller.ts"],"names":[],"mappings":"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","sourcesContent":["import express, {Request, Response} from \"express\";\nimport {body, validationResult} from \"express-validator\";\nimport {CategoryCreateDto, CategoryReadDto, CategorySummeryReadDto, CategoryUpdateDto} from \"../dtos/category.dto\";\nimport CategoryService from \"../services/category.service\";\n\nconst router = express.Router();\n\nrouter.get(\"/get-all\", async (req: Request, res: Response, next) => {\n    const categoryName: string = req.query.categoryName as string || \"\";\n    const result: CategorySummeryReadDto[] = await CategoryService.findAll(categoryName);\n    res.json(result);\n});\n\nrouter.get(\"/get-one-by-id/:id\", async (req: Request, res: Response, next) => {\n    try {\n        const id = Number(req.params.id as string);\n        const result: CategoryReadDto = await CategoryService.GetOneById(id);\n        res.json(result);\n    } catch (e) {\n        next(e);\n    }\n});\n\nrouter.post(\"/add-new\",\n    body(\"category\").not().isEmpty(),\n    body(\"counter\").not().isEmpty(),\n    body(\"latitude\").not().isEmpty(),\n    body(\"longitude\").not().isEmpty(),\n    async (req, res, next) => {\n        try {\n            const errors = validationResult(req);\n            if (!errors.isEmpty()) {\n                return res.status(400).json({error: errors.array()});\n            }\n            const creatingModel: CategoryCreateDto = new CategoryCreateDto(req.body);\n            const result: CategoryReadDto = await CategoryService.CreateOne(creatingModel);\n            res.json(result);\n        } catch (e) {\n            next(e);\n        }\n    });\n\nrouter.put(\"/update-one\", body(\"category\").not().isEmpty(),\n    body(\"counter\").not().isEmpty(),\n    body(\"latitude\").not().isEmpty(),\n    body(\"longitude\").not().isEmpty(),\n    body(\"id\").not().isEmpty(),\n    async (req, res, next) => {\n        try {\n            const errors = validationResult(req);\n            if (!errors.isEmpty()) {\n                return res.status(400).json({error: errors.array()});\n            }\n            const updatingModel: CategoryUpdateDto = new CategoryUpdateDto(req.body);\n            const result: CategoryReadDto = await CategoryService.UpdateOne(updatingModel);\n            res.json(result);\n        } catch (e) {\n            next(e);\n        }\n    }\n);\n\nrouter.delete(\"/remove-one/:id\", async (req, res, next) => {\n    const id = Number(req.params.id as string);\n    try {\n        const result = await CategoryService.RemoveOneById(id);\n        res.json(result);\n    } catch (e) {\n        next(e);\n    }\n})\n\nrouter.get(\"/get-pagination/:pageNumber/:pageSize\", async (req, res, next) => {\n    const pageNumber = Number(req.params.pageNumber as string);\n    const pageSize = Number(req.params.pageSize as string);\n\n    const categoryName: string = req.query.categoryName as string || \"\";\n\n    const result: CategorySummeryReadDto[] = await CategoryService.GetPagination(pageNumber, pageSize, categoryName);\n    res.json(result);\n\n});\n\nexport default router;\n"]}